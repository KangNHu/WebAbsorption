package com.liveeasy.web.absorption.test.spider.service;import com.alibaba.fastjson.JSON;import com.liveeasy.web.absorption.test.TmallApplicationTests;import com.liveeeasy.web.absorption.demo.spider.beike.service.IBeiKeEstateService;import com.liveeeasy.web.absorption.demo.spider.beike.BeiKeSpider;import com.liveeeasy.web.absorption.demo.spider.wuba.WuBaSpider;import org.junit.Test;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.data.redis.core.RedisTemplate;import java.util.List;import java.util.Map;import java.util.stream.Collectors;public class BeiKeSpiderTest extends TmallApplicationTests{    @Autowired    private BeiKeSpider beiKeSpider;    @Autowired    private WuBaSpider wuBaSpider;    @Autowired    private RedisTemplate<String , String> redisTemplate;    @Autowired    private IBeiKeEstateService estateService;    @Test    public void startBeiKe() throws IllegalAccessException {        beiKeSpider.startBeiKe();    }    @Test    public void startWuBa() throws IllegalAccessException {        wuBaSpider.startWuBa();    }    @Test    public void test1(){        List<String> range = redisTemplate.opsForList().range("estate_info_list", 0, -1);        List<Map> collect = range.stream().map(item -> JSON.parseObject(item, Map.class)).collect(Collectors.toList());        estateService.batchInsert(collect);    }    @Test    public void test2(){        Long test = redisTemplate.opsForSet().add("test", "1");        Long test1 = redisTemplate.opsForSet().add("test", "1");        System.out.println("test->"+test + "test1->" + test1);    }}