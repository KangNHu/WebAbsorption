package com.liveeeasy.web.absorption.demo.spider;import com.liveeasy.web.absorption.core.annotation.SPI;import com.liveeasy.web.absorption.core.processor.AbstractWebAbsorptionProcessor;import us.codecraft.webmagic.Page;import us.codecraft.webmagic.utils.UrlUtils;import java.util.List;import java.util.stream.Collectors;@SPI("beiKeSpider")public class BeiKeProcessor extends AbstractWebAbsorptionProcessor {    public boolean process(Page page) {        if(page.getRequest().getUrl().equals("https://wh.ke.com/xiaoqu")) {            List<String> all = page.getHtml().xpath("//div[@data-role='ershoufang']//a/@href").all();            if (null != all) {                final String domain = UrlUtils.getDomain(page.getRequest().getUrl());                page.addTargetRequests(all.stream().map(url -> "https://" + domain + url).collect(Collectors.toList()));            }        }        if(page.getRequest().getUrl().matches("https://wh.ke.com/xiaoqu/[a-z]+/") ||                page.getRequest().getUrl().matches("https://wh.ke.com/xiaoqu/[a-z]/pg[0-9]+/")){                page.addTargetRequest(page.getHtml().xpath("//div[@class='page-box house-lst-page-box']/a[contains(text(),'下一页')]/@href").get());                page.addTargetRequests(page.getHtml().xpath("//div[@data-component='list']//li/a/@href").all());        }        if(page.getRequest().getUrl().matches("https://wh.ke.com/xiaoqu/[0-9]+/")){                    page.getHtml().xpath("//div[@class='title']/h1/@title").get();                    page.getHtml().xpath("//div[@class='xiaoquInfo']//div[5]/span[@class='xiaoquInfoContent']/text()");        }        return true;    }}